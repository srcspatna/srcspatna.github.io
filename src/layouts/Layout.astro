---
const { title = "School Name" } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
	</head>
	<body>
		<header class="nav-container">
			<nav class="navbar container">
				<a href="/" class="logo">üè´ SchoolName</a>
				
				<button class="mobile-toggle" aria-label="Toggle Menu" id="menu-btn">
					<span class="bar"></span>
					<span class="bar"></span>
					<span class="bar"></span>
				</button>

				<ul class="nav-links" id="nav-menu">
					<li><a href="/">Home</a></li>
					<li><a href="/about">About</a></li>
					<li><a href="/academics">Academics</a></li>
					<li><a href="/news">News</a></li>
					<li><a href="/contact" class="cta">Contact</a></li>
				</ul>
			</nav>
		</header>

		<main>
			<slot />
		</main>

		<script>
			// Optimized for Astro 5 hydration
			const toggle = document.getElementById('menu-btn');
			const nav = document.getElementById('nav-menu');

			toggle?.addEventListener('click', () => {
				nav?.classList.toggle('active');
				toggle?.classList.toggle('is-active');
				// Prevent scrolling when menu is open
				document.body.style.overflow = nav?.classList.contains('active') ? 'hidden' : 'auto';
			});
		</script>
	</body>
</html>

<style is:global>
	:root {
		--primary: #1e40af;
		--white: #ffffff;
		--dark: #1f2937;
		--gray: #f3f4f6;
	}

	* { box-sizing: border-box; }
	body { margin: 0; font-family: system-ui, sans-serif; background: var(--gray); }
	.container { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; }

	.nav-container {
		background: var(--white);
		box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		position: sticky;
		top: 0;
		z-index: 9999; /* Ensure it's above everything */
		width: 100%;
	}

	.navbar {
		display: flex;
		justify-content: space-between;
		align-items: center;
		height: 70px;
	}

	.logo { font-size: 1.5rem; font-weight: 700; text-decoration: none; color: var(--primary); }

	.nav-links {
		display: flex;
		list-style: none;
		gap: 2rem;
		margin: 0;
		padding: 0;
		align-items: center;
	}

	.nav-links a { text-decoration: none; color: var(--dark); font-weight: 500; transition: 0.3s; }
	.nav-links a:hover { color: var(--primary); }

	.cta { 
		background: var(--primary); 
		color: white !important; 
		padding: 0.6rem 1.2rem; 
		border-radius: 6px; 
	}

	/* Toggle Button Styles */
	.mobile-toggle { 
		display: none; 
		cursor: pointer; 
		background: none; 
		border: none; 
		padding: 10px;
		z-index: 10000;
	}
	.bar { 
		display: block; 
		width: 25px; 
		height: 3px; 
		background: var(--dark); 
		margin: 5px 0; 
		transition: 0.4s; 
	}

	/* RESPONSIVE LOGIC */
	@media (max-width: 768px) {
		.mobile-toggle { display: block; }

		.nav-links {
			position: fixed; /* Changed to fixed for better mobile coverage */
			top: 70px;
			left: -100%;
			flex-direction: column;
			background: var(--white);
			width: 100%;
			height: calc(100vh - 70px); /* Fill screen */
			text-align: center;
			transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
			padding-top: 3rem;
			gap: 3rem; /* Space out items on mobile */
		}

		.nav-links.active { left: 0; }
		
		/* Hamburger Animation */
		.mobile-toggle.is-active .bar:nth-child(2) { opacity: 0; }
		.mobile-toggle.is-active .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
		.mobile-toggle.is-active .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
	}
</style>
